
static INPUT: &[u32] = &[0b010000010010,0b011001011100,0b110011011101,0b110100100001,0b000110011110,0b110101000101,0b100110111001,0b110000000000,0b100101100111,0b001001011000,0b010010011010,0b001110111000,0b001011111010,0b110010111011,0b001001010101,0b111111011111,0b101001001110,0b011001000101,0b001001111100,0b000101110000,0b101000101101,0b101000011101,0b011011001111,0b010100011001,0b100010001000,0b100010111010,0b000110101100,0b100101010111,0b110111101111,0b011101111001,0b111001110110,0b101101000000,0b010010111101,0b111101111101,0b010000001110,0b000111111001,0b010111100101,0b011101100000,0b001011011111,0b111010000110,0b111010001001,0b000000010111,0b001110011110,0b100011100010,0b111110010111,0b100111111111,0b100000011011,0b000110111101,0b010100010111,0b110000011111,0b011011011001,0b101110011100,0b010110001111,0b101010111001,0b100010011111,0b011110110101,0b001001101010,0b000001001000,0b101101011000,0b101100001111,0b000110000011,0b011011100001,0b010011100001,0b101111011100,0b110110100000,0b010100010000,0b110111111000,0b110000110111,0b011000000101,0b001100011111,0b111000011010,0b000110101010,0b011000101001,0b110010100110,0b100011111010,0b011111000111,0b010001100101,0b101000011110,0b011110010010,0b111001100000,0b000011011010,0b000011111110,0b101001001001,0b100110010010,0b110101010111,0b010011111000,0b010111001111,0b010101001011,0b111001010100,0b011001011001,0b110011110111,0b110001001011,0b101101001011,0b000110010111,0b110110111010,0b001001100110,0b111010011011,0b001101000101,0b100110001011,0b010000101000,0b101111001011,0b110011011110,0b011110111001,0b101100000010,0b010101101101,0b010100001010,0b000111010101,0b001100000111,0b010001010010,0b001110000110,0b000001010000,0b100010000101,0b010010101101,0b011000110110,0b111111100000,0b111111010011,0b010100010001,0b101011000010,0b111010101000,0b011010001010,0b111001000001,0b111010010000,0b101010101100,0b101011110110,0b110010100010,0b011001001100,0b100100111010,0b101011011101,0b110000001000,0b010011011101,0b000011011000,0b101100101111,0b110001111111,0b110010010010,0b001011011010,0b110101111110,0b110000111010,0b011100011110,0b110110001000,0b000101000001,0b100000010100,0b110000110000,0b110000101100,0b101101000001,0b110011101001,0b101110010101,0b110101110101,0b000110100000,0b100111101111,0b111101011001,0b110001111101,0b100010100001,0b101011111100,0b000011010111,0b110100110101,0b111100010100,0b011001110011,0b010000110000,0b110110011100,0b001000110101,0b010001111111,0b001000000110,0b101001001100,0b011000001011,0b101101010110,0b101100011101,0b001111001010,0b110011000010,0b010110111001,0b000011000000,0b011110100000,0b111001001010,0b110010100101,0b110001101001,0b001100110100,0b110100011111,0b100010001001,0b100101001010,0b110001011000,0b111110011111,0b001001000010,0b101011001010,0b110111111001,0b101000000111,0b000110000000,0b110011110000,0b111001011110,0b110000010010,0b010000101101,0b010010100101,0b011110010000,0b010011100011,0b111011100110,0b001001000011,0b110000010101,0b010010010100,0b110100100111,0b111111010110,0b111001110010,0b110100010010,0b011111111010,0b110000011011,0b001011000101,0b101010000010,0b000111100011,0b010000110110,0b111111011001,0b100001001001,0b111010011100,0b001111110000,0b010111111001,0b101101000111,0b100110011111,0b000000100111,0b111001111010,0b100001110000,0b010110101101,0b111111111110,0b101101011010,0b101101000011,0b010011001001,0b111111000010,0b011110000010,0b101110101101,0b110010110010,0b101111100101,0b101011100000,0b000001110111,0b010011011000,0b010011000101,0b101101010000,0b111011110111,0b100111111010,0b000001110010,0b010011110100,0b011100001010,0b101101001111,0b011101100001,0b001111001011,0b000000010101,0b000100110101,0b100111001011,0b000111011001,0b100010011110,0b111100100101,0b011010111001,0b011011111101,0b010100111011,0b010100110100,0b101111111001,0b110001100110,0b110001110001,0b010110100011,0b111111110100,0b011101000010,0b011111101111,0b001101001011,0b001010100110,0b111001010000,0b111111100110,0b001101001100,0b010110011010,0b011101111000,0b101000010111,0b100110010101,0b011000111010,0b011100010011,0b110011000111,0b001101010101,0b101110001101,0b000001011100,0b001011100111,0b111111010101,0b000110010110,0b100110000011,0b011000111011,0b111001011111,0b100001010000,0b001000100011,0b011011111111,0b111001001110,0b000001010111,0b001001001111,0b001001100010,0b111100101110,0b101101100100,0b000111101010,0b011101101110,0b101111001000,0b010101110111,0b100001011111,0b011110011111,0b010111010000,0b101100110100,0b001110011010,0b000110001100,0b110100101011,0b101010001101,0b010100001101,0b111101011111,0b011110111111,0b110100001001,0b101010000001,0b110100011001,0b100011011011,0b101001111111,0b111101100011,0b100101001100,0b000010101011,0b101111010010,0b100001110111,0b010000011100,0b011101110100,0b100000001111,0b100010110111,0b101011110101,0b000001000111,0b010011110110,0b000001000010,0b101010010010,0b100111110101,0b000010001111,0b001110000100,0b110100001101,0b011001001011,0b000100110000,0b000000011101,0b011011100000,0b011000001110,0b000011101111,0b110111010101,0b011000001010,0b010001111101,0b011111011001,0b001010111011,0b010000011111,0b001100000011,0b110110001110,0b100000000010,0b010101011010,0b101001100110,0b000110011001,0b110101001110,0b100111000111,0b111101101100,0b100101111011,0b011111100000,0b000000101011,0b001111011110,0b101100100100,0b010010110001,0b000110110001,0b011100111001,0b001011000100,0b111100001101,0b100010001101,0b010101010111,0b001011101110,0b110111101110,0b000010000101,0b101111001111,0b101110000000,0b010000011110,0b101111000101,0b000101001011,0b011101000100,0b001001111110,0b001001111111,0b100111000110,0b000101110010,0b011001001111,0b100000111110,0b101000001100,0b001110010001,0b010101011111,0b010110001101,0b000001000101,0b010100111101,0b100000101010,0b111111111101,0b011111001101,0b111000001111,0b100100001011,0b101111010011,0b111111110111,0b100101111111,0b100111100111,0b011000110111,0b011010000001,0b010010110000,0b111000110100,0b111100010110,0b100010100111,0b011010111111,0b110101100011,0b001111100001,0b101001011110,0b100011110011,0b100111110111,0b100000100100,0b111010110011,0b001011100101,0b101101010001,0b111010111110,0b000100010110,0b111101001111,0b101001001111,0b000001010101,0b111011101001,0b010101111111,0b111110101000,0b101101111011,0b010100001100,0b101011110001,0b010011101111,0b011001001001,0b001000001001,0b100100011111,0b010111100001,0b111101011110,0b110011110101,0b100101000010,0b100011110001,0b000111111010,0b010001011111,0b011110011011,0b100100000000,0b011010011001,0b010001100000,0b011111001100,0b101011000110,0b110100101110,0b101000111011,0b011011001000,0b100111000010,0b101110011101,0b000110000001,0b001101001101,0b100110011000,0b011110111010,0b110101010000,0b100100111000,0b011111000011,0b111101010101,0b100011101100,0b000101110100,0b010110101010,0b101001111110,0b011100010110,0b001100010100,0b010101110001,0b100101110111,0b110110100101,0b100011000011,0b100101000101,0b001111110011,0b101100010111,0b001011110101,0b001010110001,0b110000010011,0b100111100100,0b100110110010,0b101101110110,0b000100101011,0b101111100100,0b011010110110,0b101110010111,0b000010101110,0b001000000111,0b100000110110,0b001000000000,0b111011101000,0b111011011001,0b000011111011,0b000010101101,0b011100111011,0b000111010000,0b000010110001,0b011100110101,0b001111110111,0b000110100011,0b010010001010,0b010100000001,0b111101101101,0b010010010011,0b110101100100,0b011001010100,0b100101110100,0b110111011100,0b110001110011,0b011011001011,0b110011011011,0b101110101111,0b111011000001,0b110010001111,0b000001000000,0b101101111100,0b000111000001,0b000001011001,0b110100110000,0b110101011100,0b010110011000,0b010110010000,0b010110000011,0b010010010000,0b100001100010,0b011110110001,0b111100101010,0b101111111010,0b101010110001,0b000110011011,0b010110000001,0b001110111001,0b000111101011,0b010110110110,0b000000000101,0b000100010000,0b110000010000,0b001011011101,0b011111000101,0b001110101010,0b101110110111,0b110101110111,0b101111000110,0b110110000011,0b110001110010,0b011111101000,0b010111100110,0b011100111111,0b111101100100,0b110111110100,0b100010010000,0b110101000111,0b111000000111,0b111111011010,0b100001111010,0b010011011100,0b011011100101,0b110100101000,0b001101110010,0b000010110100,0b110001010101,0b100000011100,0b101101100111,0b011100111110,0b111110001110,0b010011101101,0b001001001110,0b011001100001,0b001010010100,0b010011010011,0b001111100010,0b001110001100,0b011011010010,0b010100000100,0b011010010011,0b101110011010,0b001111101000,0b001110011011,0b000001111110,0b110110101001,0b101000000110,0b000010000111,0b100111111001,0b110111001101,0b110101101011,0b110101100110,0b101010110011,0b000110100001,0b110011100100,0b001011101101,0b011001001010,0b100101100110,0b010001100001,0b110110001101,0b100111011001,0b100100111100,0b000001111010,0b110000111011,0b110101100000,0b001111111111,0b010010100110,0b001011111100,0b111011000110,0b101011010110,0b001100011110,0b010010010001,0b011001110111,0b110110110001,0b010110100000,0b110010011001,0b001111000001,0b100100010100,0b000001111100,0b000011101001,0b101001110010,0b011100000111,0b001000011110,0b010001111100,0b010010110100,0b110000111000,0b100100001100,0b010111100010,0b010010001000,0b100110001110,0b111101110100,0b011111011000,0b001000110000,0b000010100000,0b010111000000,0b001111101110,0b000111110101,0b001000001011,0b111100001001,0b011010011111,0b011101101111,0b000101011011,0b000100000101,0b001000010101,0b000011000001,0b011011010100,0b011101100101,0b000010110111,0b001101000011,0b000111001000,0b001010000111,0b111010101110,0b100001111111,0b101101110000,0b010111011101,0b111010111000,0b011111000110,0b011100001011,0b101011100110,0b011011100100,0b010010000001,0b001100101011,0b000110111010,0b010110011101,0b010100101101,0b100001100101,0b011011010111,0b111010111001,0b111000001010,0b100101011110,0b001000011001,0b101001101001,0b011111000001,0b010010111110,0b101110110110,0b111110010011,0b100111011100,0b001100100011,0b100010101100,0b111100001110,0b010101101111,0b010001000111,0b110101111010,0b011100100101,0b110001010011,0b000011100001,0b001010111001,0b011100011010,0b010101010101,0b001011000000,0b101011110111,0b011001110010,0b010000001011,0b000011100010,0b010010000011,0b011001111010,0b000101011100,0b111010000101,0b001011111011,0b011011101101,0b100100110111,0b111000101010,0b100001110101,0b101110010100,0b000001100111,0b101001101111,0b100000001100,0b110000101000,0b110111011010,0b010001001010,0b000100000001,0b110110101011,0b011111101011,0b101001100010,0b000111100001,0b010010001011,0b101001010110,0b011011100011,0b000111011101,0b100000100101,0b000010100011,0b111010001011,0b111110111111,0b101000111000,0b110100100011,0b010001110010,0b001000010000,0b111101011011,0b110100011011,0b010101100110,0b010001101111,0b001111011111,0b101111110110,0b011011101111,0b000010101111,0b000000110011,0b011011000111,0b010001000110,0b010111101111,0b110101011111,0b001001000111,0b011011001110,0b100111110110,0b111100100001,0b111010100010,0b010010000010,0b000111110111,0b111101000100,0b000011110011,0b111000101111,0b110010011111,0b000001101001,0b001110101001,0b011111101110,0b110111010010,0b011100110010,0b100011000111,0b000000010011,0b011011111100,0b011110010101,0b110111101011,0b011001111101,0b010101010110,0b011110011001,0b111100011100,0b011001010001,0b000110110101,0b000111010010,0b101011101011,0b101010100000,0b011101011001,0b001110111111,0b011011010110,0b110111100001,0b100011111011,0b001010011101,0b111001101101,0b011100001000,0b011010011100,0b100111010011,0b000010010110,0b010110010001,0b111010010110,0b111111110101,0b100011000101,0b011010001001,0b111010001010,0b000100000110,0b011010001000,0b100110101001,0b010111111011,0b010111100011,0b011101010100,0b101000011001,0b101001110111,0b111001010101,0b100110111111,0b111010110110,0b100000011000,0b110010100001,0b001110011111,0b010001011010,0b011100100011,0b010111011110,0b100110110100,0b111000001000,0b110110101000,0b000000001111,0b010111101010,0b000100000100,0b111000110010,0b011111110011,0b001100100001,0b010100000111,0b111010100111,0b010001101110,0b101111110010,0b011111000100,0b101100111110,0b010111101100,0b011110111000,0b110001000100,0b011101000111,0b011011101000,0b000100100110,0b100110100110,0b000000001011,0b010101001111,0b110001000001,0b100011010011,0b101000100011,0b011011010011,0b100010001110,0b100111101001,0b101111111111,0b111010011001,0b011000010100,0b110101011101,0b100110101011,0b010000011001,0b010011011001,0b010101000101,0b010100011111,0b100111001000,0b111110100011,0b000110010010,0b000000010010,0b101110001100,0b111010000011,0b100001001000,0b000011010101,0b000100011000,0b001111111100,0b011110101000,0b101111011111,0b100000111011,0b101001100011,0b001001100100,0b000100010100,0b010111101101,0b101001111010,0b011000101011,0b111011010010,0b011001101001,0b011101010110,0b011011110011,0b010010101010,0b001111010100,0b100000010110,0b001101000111,0b000010101010,0b110010001001,0b011001111100,0b000100001000,0b010111001011,0b101111100111,0b100111100011,0b100001010101,0b100111011011,0b100101000110,0b011010100110,0b100011101110,0b111010110010,0b010000100000,0b100100110110,0b011001101101,0b011111100100,0b101100101101,0b101010110100,0b101001000111,0b110100010100,0b011101001000,0b101110101100,0b111100010001,0b001101011101,0b111111110110,0b101110001011,0b001100101111,0b110000001010,0b110011001000,0b011100000110,0b011001101000,0b001100001011,0b111000111011,0b111100000111,0b010000000001,0b000101011111,0b001000101110,0b101101101011,0b111111110010,0b111000001110,0b110101111100,0b101100010011,0b010011110111,0b100100010111,0b111001101001,0b101000001011,0b110001110111,0b100011111100,0b000101011110,0b011000101000,0b001010011110,0b100111111110,0b100000111010,0b001111010101,0b011111010100,0b001101101100,0b010011111001,0b001010101100,0b001110111101,0b000101010000,0b100101101011,0b010100101010,0b000000001001,0b010011000100,0b010001000100,0b110101100101,0b110011011111,0b100001010111,0b111111011000,0b010111111100,0b111000101000,0b101011101100,0b111111011100,0b001110110100,0b000010100010,0b111101110001,0b101011000000,0b101101000101,0b110000000100,0b110111111101,0b101110100110,0b111011000000,0b001011010000,0b100100101001,0b111110101010,0b111011110011,0b111000000011,0b000101101001,0b110100011100,0b111101000000,0b100000100001,0b010110001011,0b001100111011,0b110000100010,0b111001010111,0b100100001111,0b110111111110,0b010111000101,0b110000010111,0b100011010000,0b101010110111,0b011100101110,0b001110001000,0b110011100001,0b100101001110,0b110110110110,0b101110001001,0b011011001001,0b110000101101,0b001000001101,0b001000000010,0b110110010000,0b011110001100,0b100001011101,0b000001010100,0b010100111110,0b101110111111,0b101010101110,0b001100010000,0b100000001011,0b010011101100,0b101011011001,0b111100000000,0b011011110001,0b001110001110,0b010100100101,0b111011101100,0b011110101101,0b010110100010,0b101010001111,0b110110000101,0b101000110110,0b101101001110,0b111111101111,0b001001110010,0b001001011010,0b111100100110,0b000101010011,0b100100001000,0b110111010000,0b010010001111,0b000000100101,0b001101110100,0b101010110010,0b011110010111,0b100011001110,0b111011010011,0b110011111001,0b110100100100,0b110101001000,0b110001111011,0b010110001100,0b011110111100,0b010100000101];

fn count_bit(list: &[u32], bit: usize) -> (u32,u32) {
  let mut cnt = [0,0];
  for &x in list {
    cnt[(x as usize >> bit) & 1] += 1
  }
  (cnt[0], cnt[1])
}

fn part1() -> u32 {
  let (mut x, mut y) = (0,0);
  for i in 0..12 {
    let (zero, one) = count_bit(INPUT, i);
    let tmp = if one > zero {&mut x} else {&mut y};
    *tmp += 1 << i;
  }
  x * y
}

fn part2(a: u32, b: u32) -> u32 {
  let mut nums = INPUT.to_vec();
  for i in (0..12).rev() {
    let (zero, one) = count_bit(&nums, i);
    let keep = if one >= zero {a} else {b};
    nums.retain(|x| (x>>i) & 1 == keep);
    if nums.len() == 1 { break }
  }
  nums[0]
}

aoc2021::main! {
  (part1(), part2(1,0) * part2(0,1))
}
